(this["webpackJsonp@nexys/ddl"]=this["webpackJsonp@nexys/ddl"]||[]).push([[0],{24:function(e,t,n){e.exports=n(56)},29:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"LeftRight",(function(){return q}));var r=n(0),o=n.n(r),c=n(21),l=n.n(c);n(29),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i,u=n(5),s=n(3),m=n(7),p=function(e){try{return JSON.parse(e),!0}catch(t){return!1}},f="https://github.com/Nexysweb/ddl",d=function(e){var t="fa fa-"+e.name;return o.a.createElement("i",{className:t})},y={borderTop:"1px solid #e5e5e5",borderBottom:"1px solid #e5e5e5",boxShadow:"0 .25rem .75rem rgba(0, 0, 0, .05)"},h=[{link:"/validate/schema",name:"Validate Schema"},{link:"/openApi",name:"Open Api Conversion"},{link:"/toTS",name:"Model to TypeScript"},{link:"/queryToTS",name:"Query to TypeScript"}],b=function(e){var t=o.a.createElement("header",null,o.a.createElement("div",{style:y,className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white"},o.a.createElement("h5",{className:"my-0 mr-md-auto font-weight-normal"},o.a.createElement(m.a,{to:"/"},"Nexys DDL")," ",o.a.createElement("small",null,o.a.createElement("a",{href:f},o.a.createElement(d,{name:"code"})))),o.a.createElement("nav",{className:"my-2 my-md-0 mr-md-3"},h.map((function(e,t){return o.a.createElement(m.a,{className:"p-2 text-dark",key:t,to:e.link},e.name)})))));return o.a.createElement(o.a.Fragment,null,t,o.a.createElement("div",{className:"container"},e.children))},g=function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h1",null,"Nexys Data Defintion Language"),o.a.createElement("p",null,"Use the menu to explore the different functionalities of the package"),o.a.createElement("p",null,o.a.createElement("a",{href:f},o.a.createElement(d,{name:"code"})," Source")," under MIT license"))},E=n(1),v=n.n(E),O=["Int","Long","Double","LocalDateTime","LocalDate","Boolean","BigDecimal","String"],S=v.a.object().keys({name:v.a.string().alphanum().required(),column:v.a.string().optional(),type:v.a.string().alphanum().required(),optional:v.a.boolean(),permissions:v.a.array().optional(),description:v.a.string().optional()}),j=v.a.object().keys({name:v.a.string().alphanum().required(),uuid:v.a.boolean().optional(),table:v.a.string().optional(),description:v.a.string().optional(),fields:v.a.array().items(S).unique((function(e,t){return e.name===t.name})).required(),permissions:v.a.array().optional(),constraints:v.a.array()}),N=v.a.array().items(j).required(),x=function(e){var t=N.validate(e,{abortEarly:!1});if(void 0===t.error||null===t.error){var n=function(e){var t=[],n=e.map((function(e){var n=e.fields.map((function(e){return e.type})).filter((function(e){return O.indexOf(e)<0}));return t=t.concat(n),e.name})),a=[];return t.map((function(e){return n.indexOf(e)<0&&a.push('"'.concat(e,'" is referenced as a type in params but was never defined')),!0})),a}(t.value);return n.length>0?{status:!1,errors:n}:{status:!0,errors:null}}return{status:!1,errors:t.error.details.map((function(e){return e.message+" "+JSON.stringify(e.path)}))}},D=n(2),k=function(e){var t=e.validationFunc,n=e.valueDefault,a=void 0===n?"":n,r=o.a.useState(a),c=Object(D.a)(r,2),l=c[0],i=c[1],u=o.a.useState(null),s=Object(D.a)(u,2),m=s[0],f=s[1],d=o.a.useState(null),y=Object(D.a)(d,2),h=y[0],b=y[1];return o.a.createElement(o.a.Fragment,null,m?o.a.createElement("ul",{className:"list-group"},m.map((function(e,t){return o.a.createElement("li",{className:"list-group-item list-group-item-danger",key:t},e)}))):null,h?o.a.createElement("p",{className:"alert alert-success"},h):null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("textarea",{className:"form-control",style:{minWidth:"100%",height:"400px"},placeholder:"insert your json here",value:l,onChange:function(e){var t=e.target.value;i(t)}}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:function(){if(!p(l)){return f(["the string you entered is not a JSON string, try again"]),void b(null)}var e=t(l);if(console.log(e),e.errors)return f(e.errors),void b(null);f(null),b("Congratulations, this is a valid file")}},"Validate"))))},w=[{name:"MyEntity",fields:[{name:"f1",type:"String"},{name:"f2",type:"Int"},{name:"f3",type:"Boolean",optional:!0},{name:"status",type:"EntityName2",optional:!0}]},{name:"EntityName2",fields:[{name:"name",type:"String"}]}],J=function(e){var t=x(JSON.parse(e));return t&&!t.status&&t.errors?{errors:["the string you entered is not a properly formatted DDL file, try again"].concat(t.errors.map((function(e){return e})))}:t},C=function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"Schema Validation"),o.a.createElement(k,{valueDefault:JSON.stringify(w,null,2),validationFunc:J}))},T=function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"Open Api V3"),o.a.createElement("p",null,"Based on ",o.a.createElement("a",{href:"https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md"},"OpenAPI Specification")),o.a.createElement("p",null,o.a.createElement("b",null,"TODO")))},L=function(e){return o.a.createElement("textarea",{className:"form-control",style:{minWidth:"100%",height:"400px"},placeholder:"insert your json here",value:e.content,onChange:function(t){var n=t.target.value;e.onChange(n)}})},B={display:"block",whiteSpace:"pre-wrap"},I=function(e){return o.a.createElement("code",{style:B},e.value)},A=function(e){return o.a.createElement("p",{className:"alert alert-danger"},e.message)},q=function(e){return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,e.title),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},e.left),o.a.createElement("div",{className:"col-md-6"},e.right)))},F={name:"Company",uuid:!1,fields:[{type:"LocalDateTime",name:"logDateAdded",optional:!1},{type:"Country",name:"country",column:"country_id",optional:!0},{type:"String",name:"wwId",optional:!0},{type:"String",name:"name",optional:!1},{type:"CompanyStatus",name:"status",column:"status_id",optional:!1},{type:"Int",name:"type",column:"type_id",optional:!1},{type:"User",name:"logUser",column:"log_user_id",optional:!0},{type:"String",name:"ceId",optional:!1}]},R=["LocalDateTime","LocalDate","String","Int","BigDecimal","Double","Boolean"],M=function(e){var t=e.name,n=e.uuid?"uuid: string":"id: number",a=e.fields.map((function(e){var t=e.name,n=e.optional?"?":"",a=function(e){if(R.includes(e))switch(e){case"LocalDateTime":case"LocalDate":return"Date";case"Int":case"BigDecimal":case"Double":return"number";case"Boolean":return"boolean";default:return"string"}return"{id: number} | ".concat(e)}(e.type);return"".concat(t).concat(n,": ").concat(a)})),r=[n].concat(a).join(",\n  ");return"export interface ".concat(t," {\n  ").concat(r,"\n}")},_=function(e){return e.map((function(e){return M(e)})).join("\n\n")},P=function(e){switch(e){case"String":return"Joi.string()";case"Boolean":return"Joi.boolean()";case"Int":case"BigDecimal":case"Double":return"Joi.number()";case"LocalDateTime":return"Joi.date()";case"LocalDate":return"Joi.string()";default:return console.warn('The type "'.concat(e,'" could not be converted to Joi, this may create some errors')),"Joi.string()"}},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e:e+".required()"},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.filter((function(e){return!t.includes(e.name)})).map((function(e){return"  "+e.name+": "+V(P(e.type),e.optional)})).join(",\n");return"Joi.Object({\n"+n+"\n});"},U=function(){var e=Object(r.useState)(JSON.stringify(F,null,2)),t=Object(D.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)(null),i=Object(D.a)(l,2),u=i[0],s=i[1],m=Object(r.useState)(null),f=Object(D.a)(m,2),d=f[0],y=f[1],h=o.a.createElement(o.a.Fragment,null,d&&o.a.createElement(A,{message:d}),o.a.createElement(L,{content:n,onChange:function(e){c(e),p(e)?y(null):y("no json")}}),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){try{var e=function(e){var t=JSON.parse(e);return Array.isArray(t)?_(t):t.entities?_(t.entities):M(t)}(n);s(e)}catch(t){y("can't convert")}}},"Convert!"),"\xa0",o.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return c("[]")}},"Reset")),b=u&&o.a.createElement(I,{value:u});return o.a.createElement(a.LeftRight,{title:"Schema to Typescript",left:h,right:b})},Q=n(13),G=function e(t,n,a){var r=Object.keys(n),o=r.filter((function(e){return"object"===typeof n[e]})).map((function(r){var o=n[r],c=function(e,t,n){var a=n.find((function(t){return t.name===e}));if(!a)throw Error("parent entity cannot be found");var r=a.fields.find((function(e){return e.name===t}));if(!r)throw Error("field cannot be found");return r.type}(t,r,a),l=e(c,o,a);return" & {".concat(r,": ").concat(l,"}")})),c=r.filter((function(e){return!0===n[e]}));if(c.length>0)return"Pick<".concat(t,", ").concat(c.map((function(e){return"'".concat(e,"'")})).join(" | "),">");var l=r.filter((function(e){return!1===n[e]}));return l.length>0?"Omit<".concat(t,", ").concat(l.map((function(e){return"'".concat(e,"'")})).join(" | "),">"):t+o.join("")},$=function(e,t,n,a){var r=z(n,a);return"("+G(e,t,a)+r+")[]"},z=function(e,t){var n=Object.keys(e).map((function(n){var a=e[n].projection||{},r=$(n,a,{},t);return" & {".concat(n,": ").concat(r,"}")}));return 0===n.length?"":n.join("")},H=function(e,t){return function(e,t){var n=Object.keys(e).map((function(n){var a=e[n].projection||{},r=e[n].references||{},o=$(n,a,r,t);return"".concat(n,": ").concat(o)})).join(", ");return"{".concat(n,"}")}(JSON.parse(e),JSON.parse(t))},K=(i={},Object(Q.a)(i,"MyEntity",{projection:{status:{name:!0,address:!0}}}),Object(Q.a)(i,"EntityName2",{}),i),X=function(){var e=Object(r.useState)(JSON.stringify(w,null,2)),t=Object(D.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)(JSON.stringify(K,null,2)),i=Object(D.a)(l,2),u=i[0],s=i[1],m=Object(r.useState)(null),f=Object(D.a)(m,2),d=f[0],y=f[1],h=Object(r.useState)(null),b=Object(D.a)(h,2),g=b[0],E=b[1],v=o.a.createElement(o.a.Fragment,null,g&&o.a.createElement(A,{message:g}),o.a.createElement("h4",null,"Query"),o.a.createElement(L,{content:u,onChange:function(e){s(e),p(e)?E(null):E("no json")}}),o.a.createElement("h4",null,"Model"),o.a.createElement(L,{content:n,onChange:function(e){c(e),p(e)?E(null):E("no json")}}),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){try{var e=H(u,n);y(e)}catch(t){E("can't convert")}}},"Get output TypeScript type!"),"\xa0",o.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){c("[]"),s("[]")}},"Reset")),O=d&&o.a.createElement(I,{value:d});return o.a.createElement(a.LeftRight,{title:"Schema to Typescript",left:v,right:O})},Y=function(){var e=Object(r.useState)(JSON.stringify(F.fields,null,2)),t=Object(D.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)(null),i=Object(D.a)(l,2),u=i[0],s=i[1],m=Object(r.useState)(null),f=Object(D.a)(m,2),d=f[0],y=f[1],h=o.a.createElement(o.a.Fragment,null,d&&o.a.createElement(A,{message:d}),o.a.createElement(L,{content:n,onChange:function(e){c(e),p(e)?y(null):y("no json")}}),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){try{var e=function(e){var t=JSON.parse(e);return W(t)}(n);s(e)}catch(t){y("can't convert")}}},"Convert!"),"\xa0",o.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return c("[]")}},"Reset")),b=u&&o.a.createElement(I,{value:u});return o.a.createElement(a.LeftRight,{title:"Schema to Joi",left:h,right:b})},Z=function(){return o.a.createElement("p",null,"Page Not Found")};var ee=Object(u.f)((function(){return o.a.createElement(b,null,o.a.createElement(u.c,null,o.a.createElement(u.a,{exact:!0,path:"/",component:g}),o.a.createElement(u.a,{exact:!0,path:"/validate/schema",component:C}),o.a.createElement(u.a,{exact:!0,path:"/openApi",component:T}),o.a.createElement(u.a,{exact:!0,path:"/toTS",component:U}),o.a.createElement(u.a,{exact:!0,path:"/queryToTs",component:X}),o.a.createElement(u.a,{exact:!0,path:"/toJoi",component:Y}),o.a.createElement(u.a,{path:"/",component:Z})))})),te=s.a({basename:"/ddl"});l.a.render(o.a.createElement(u.b,{history:te},o.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.f5139f67.chunk.js.map