(this["webpackJsonp@nexys/ddl"]=this["webpackJsonp@nexys/ddl"]||[]).push([[0],{24:function(e,t,n){e.exports=n(56)},29:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"LeftRight",(function(){return M}));var r=n(0),o=n.n(r),c=n(21),l=n.n(c);n(29),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i,u=n(5),m=n(3),s=n(7),p=function(e){try{return JSON.parse(e),!0}catch(t){return!1}},f="https://github.com/Nexysweb/ddl",d=function(e){var t="fa fa-"+e.name;return o.a.createElement("i",{className:t})},y={borderTop:"1px solid #e5e5e5",borderBottom:"1px solid #e5e5e5",boxShadow:"0 .25rem .75rem rgba(0, 0, 0, .05)"},b=[{link:"/validate/schema",name:"Validate Schema"},{link:"/openApi",name:"Open Api Conversion"},{link:"/toTS",name:"Model to TypeScript"},{link:"/queryToTS",name:"Query to TypeScript"},{link:"/fake-data",name:"Fake Data"}],h=function(e){var t=o.a.createElement("header",null,o.a.createElement("div",{style:y,className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white"},o.a.createElement("h5",{className:"my-0 mr-md-auto font-weight-normal"},o.a.createElement(s.a,{to:"/"},"Nexys DDL")," ",o.a.createElement("small",null,o.a.createElement("a",{href:f},o.a.createElement(d,{name:"code"})))),o.a.createElement("nav",{className:"my-2 my-md-0 mr-md-3"},b.map((function(e,t){return o.a.createElement(s.a,{className:"p-2 text-dark",key:t,to:e.link},e.name)})))));return o.a.createElement(o.a.Fragment,null,t,o.a.createElement("div",{className:"container"},e.children))},g=function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h1",null,"Nexys Data Defintion Language"),o.a.createElement("p",null,"Use the menu to explore the different functionalities of the package"),o.a.createElement("p",null,o.a.createElement("a",{href:f},o.a.createElement(d,{name:"code"})," Source")," under MIT license"))},E=n(1),v=n.n(E),O=["Int","Long","Double","LocalDateTime","LocalDate","Boolean","BigDecimal","String"],S=v.a.object().keys({name:v.a.string().alphanum().required(),column:v.a.string().optional(),type:v.a.string().alphanum().required(),optional:v.a.boolean(),permissions:v.a.array().optional(),description:v.a.string().optional()}),j=v.a.object().keys({name:v.a.string().alphanum().required(),uuid:v.a.boolean().optional(),table:v.a.string().optional(),description:v.a.string().optional(),fields:v.a.array().items(S).unique((function(e,t){return e.name===t.name})).required(),permissions:v.a.array().optional(),constraints:v.a.array()}),N=v.a.array().items(j).required(),k=function(e){var t=N.validate(e,{abortEarly:!1});if(void 0===t.error||null===t.error){var n=function(e){var t=[],n=e.map((function(e){var n=e.fields.map((function(e){return e.type})).filter((function(e){return e in O}));return t=t.concat(n),e.name})),a=[];return t.map((function(e){return n.indexOf(e)<0&&a.push('"'.concat(e,'" is referenced as a type in params but was never defined')),!0})),a}(t.value);return n.length>0?{status:!1,errors:n}:{status:!0,errors:null}}return{status:!1,errors:t.error.details.map((function(e){return e.message+" "+JSON.stringify(e.path)}))}},D=n(2),w=function(e){var t=e.validationFunc,n=e.valueDefault,a=void 0===n?"":n,r=o.a.useState(a),c=Object(D.a)(r,2),l=c[0],i=c[1],u=o.a.useState(null),m=Object(D.a)(u,2),s=m[0],f=m[1],d=o.a.useState(null),y=Object(D.a)(d,2),b=y[0],h=y[1];return o.a.createElement(o.a.Fragment,null,s?o.a.createElement("ul",{className:"list-group"},s.map((function(e,t){return o.a.createElement("li",{className:"list-group-item list-group-item-danger",key:t},e)}))):null,b?o.a.createElement("p",{className:"alert alert-success"},b):null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("textarea",{className:"form-control",style:{minWidth:"100%",height:"400px"},placeholder:"insert your json here",value:l,onChange:function(e){var t=e.target.value;i(t)}}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:function(){if(!p(l)){return f(["the string you entered is not a JSON string, try again"]),void h(null)}var e=t(l);if(console.log(e),e.errors)return f(e.errors),void h(null);f(null),h("Congratulations, this is a valid file")}},"Validate"))))},x=[{name:"MyEntity",fields:[{name:"f1",type:"String"},{name:"f2",type:"Int"},{name:"f3",type:"Boolean",optional:!0},{name:"status",type:"EntityName2",optional:!0}]},{name:"EntityName2",fields:[{name:"name",type:"String"}]}],J=function(e){var t=k(JSON.parse(e));return t&&!t.status&&t.errors?{errors:["the string you entered is not a properly formatted DDL file, try again"].concat(t.errors.map((function(e){return e})))}:t},C=function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"Schema Validation"),o.a.createElement(w,{valueDefault:JSON.stringify(x,null,2),validationFunc:J}))},T=function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"Open Api V3"),o.a.createElement("p",null,"Based on ",o.a.createElement("a",{href:"https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md"},"OpenAPI Specification")),o.a.createElement("p",null,o.a.createElement("b",null,"TODO")))},L=function(e){return o.a.createElement("textarea",{className:"form-control",style:{minWidth:"100%",height:"400px"},placeholder:"insert your json here",value:e.content,onChange:function(t){var n=t.target.value;e.onChange(n)}})},B={display:"block",whiteSpace:"pre-wrap"},I=function(e){return o.a.createElement("code",{style:B},e.value)},F=function(e){return o.a.createElement("p",{className:"alert alert-danger"},e.message)},M=function(e){return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,e.title),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},e.left),o.a.createElement("div",{className:"col-md-6"},e.right)))},A={name:"Company",uuid:!1,fields:[{type:"LocalDateTime",name:"logDateAdded",optional:!1},{type:"Country",name:"country",column:"country_id",optional:!0},{type:"String",name:"wwId",optional:!0},{type:"String",name:"name",optional:!1},{type:"CompanyStatus",name:"status",column:"status_id",optional:!1},{type:"Int",name:"type",column:"type_id",optional:!1},{type:"User",name:"logUser",column:"log_user_id",optional:!0},{type:"String",name:"ceId",optional:!1}]},q=["LocalDateTime","LocalDate","String","Int","BigDecimal","Double","Boolean"],R=function(e){var t=e.name,n=e.uuid?"uuid: string":"id: number",a=e.fields.map((function(e){var t=e.name,n=e.optional?"?":"",a=function(e){if(q.includes(e))switch(e){case"LocalDateTime":case"LocalDate":return"Date";case"Int":case"BigDecimal":case"Double":return"number";case"Boolean":return"boolean";default:return"string"}return"{id: number} | ".concat(e)}(e.type);return"".concat(t).concat(n,": ").concat(a)})),r=[n].concat(a).join(",\n  ");return"export interface ".concat(t," {\n  ").concat(r,"\n}")},P=function(e){return e.map((function(e){return R(e)})).join("\n\n")},V=function(e){switch(e){case"String":return"Joi.string()";case"Boolean":return"Joi.boolean()";case"Int":case"BigDecimal":case"Double":return"Joi.number()";case"LocalDateTime":return"Joi.date()";case"LocalDate":return"Joi.string()";default:return console.warn('The type "'.concat(e,'" could not be converted to Joi, this may create some errors')),"Joi.string()"}},W=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?e:e+".required()"},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.filter((function(e){return!t.includes(e.name)})).map((function(e){return"  "+e.name+": "+W(V(e.type),e.optional)})).join(",\n");return"Joi.Object({\n"+n+"\n});"},U=function(){var e=Object(r.useState)(JSON.stringify(A,null,2)),t=Object(D.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)(null),i=Object(D.a)(l,2),u=i[0],m=i[1],s=Object(r.useState)(null),f=Object(D.a)(s,2),d=f[0],y=f[1],b=o.a.createElement(o.a.Fragment,null,d&&o.a.createElement(F,{message:d}),o.a.createElement(L,{content:n,onChange:function(e){c(e),p(e)?y(null):y("no json")}}),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){try{var e=function(e){var t=JSON.parse(e);return Array.isArray(t)?P(t):t.entities?P(t.entities):R(t)}(n);m(e)}catch(t){y("can't convert")}}},"Convert!"),"\xa0",o.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return c("[]")}},"Reset")),h=u&&o.a.createElement(I,{value:u});return o.a.createElement(a.LeftRight,{title:"Schema to Typescript",left:b,right:h})},G=n(13),Q=function e(t,n,a){var r=Object.keys(n),o=r.filter((function(e){return"object"===typeof n[e]})).map((function(r){var o=n[r],c=function(e,t,n){var a=n.find((function(t){return t.name===e}));if(!a)throw Error("parent entity cannot be found");var r=a.fields.find((function(e){return e.name===t}));if(!r)throw Error("field cannot be found");return r.type}(t,r,a),l=e(c,o,a);return" & {".concat(r,": ").concat(l,"}")})),c=r.filter((function(e){return!0===n[e]}));if(c.length>0)return"Pick<".concat(t,", ").concat(c.map((function(e){return"'".concat(e,"'")})).join(" | "),">");var l=r.filter((function(e){return!1===n[e]}));return l.length>0?"Omit<".concat(t,", ").concat(l.map((function(e){return"'".concat(e,"'")})).join(" | "),">"):t+o.join("")},z=function(e,t,n,a){var r=H(n,a);return"("+Q(e,t,a)+r+")[]"},H=function(e,t){var n=Object.keys(e).map((function(n){var a=e[n].projection||{},r=z(n,a,{},t);return" & {".concat(n,": ").concat(r,"}")}));return 0===n.length?"":n.join("")},K=function(e,t){return function(e,t){var n=Object.keys(e).map((function(n){var a=e[n].projection||{},r=e[n].references||{},o=z(n,a,r,t);return"".concat(n,": ").concat(o)})).join(", ");return"{".concat(n,"}")}(JSON.parse(e),JSON.parse(t))},X=(i={},Object(G.a)(i,"MyEntity",{projection:{status:{name:!0,address:!0}}}),Object(G.a)(i,"EntityName2",{}),i),Y=function(){var e=Object(r.useState)(JSON.stringify(x,null,2)),t=Object(D.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)(JSON.stringify(X,null,2)),i=Object(D.a)(l,2),u=i[0],m=i[1],s=Object(r.useState)(null),f=Object(D.a)(s,2),d=f[0],y=f[1],b=Object(r.useState)(null),h=Object(D.a)(b,2),g=h[0],E=h[1],v=o.a.createElement(o.a.Fragment,null,g&&o.a.createElement(F,{message:g}),o.a.createElement("h4",null,"Query"),o.a.createElement(L,{content:u,onChange:function(e){m(e),p(e)?E(null):E("no json")}}),o.a.createElement("h4",null,"Model"),o.a.createElement(L,{content:n,onChange:function(e){c(e),p(e)?E(null):E("no json")}}),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){try{var e=K(u,n);y(e)}catch(t){E("can't convert")}}},"Get output TypeScript type!"),"\xa0",o.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){c("[]"),m("[]")}},"Reset")),O=d&&o.a.createElement(I,{value:d});return o.a.createElement(a.LeftRight,{title:"Schema to Typescript",left:v,right:O})},Z=function(){var e=Object(r.useState)(JSON.stringify(A.fields,null,2)),t=Object(D.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)(null),i=Object(D.a)(l,2),u=i[0],m=i[1],s=Object(r.useState)(null),f=Object(D.a)(s,2),d=f[0],y=f[1],b=o.a.createElement(o.a.Fragment,null,d&&o.a.createElement(F,{message:d}),o.a.createElement(L,{content:n,onChange:function(e){c(e),p(e)?y(null):y("no json")}}),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){try{var e=function(e){var t=JSON.parse(e);return _(t)}(n);m(e)}catch(t){y("can't convert")}}},"Convert!"),"\xa0",o.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return c("[]")}},"Reset")),h=u&&o.a.createElement(I,{value:u});return o.a.createElement(a.LeftRight,{title:"Schema to Joi",left:b,right:h})},$=function(){return Math.random().toString(36).substring(2)+Date.now().toString(36)},ee=function(){return function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*a));return t}(12)},te=function(){return Math.round(ne())},ne=function(){return 100*Math.random()},ae=function(){return Boolean(Math.round(Math.random()))},re=function(){var e=13167e6*Math.random()+14200704e5;return new Date(e)},oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t||!ae())switch(e){case"Int":return te();case"Float":return ne();case"Boolean":return ae();case"LocalDateTime":return re();default:return ee()}},ce=function(e){try{return function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={id:te()};return t?n.uuid=$():n.id=te(),e.forEach((function(e){var t=oe(e.type,e.optional);void 0!==t&&(n[e.name]=t)})),n}(JSON.parse(e))}catch(t){throw F({message:"model could not be interpreted"})}},le=[{name:"f1",type:"String"},{name:"f2",type:"Int"},{name:"f3",type:"Boolean",optional:!0},{name:"f4",type:"Float",optional:!0}],ie=function(){var e=Object(r.useState)(JSON.stringify(le,null,2)),t=Object(D.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)(null),i=Object(D.a)(l,2),u=i[0],m=i[1],s=Object(r.useState)(null),f=Object(D.a)(s,2),d=f[0],y=f[1],b=Object(r.useState)(1),h=Object(D.a)(b,2),g=h[0],E=h[1],v=o.a.createElement(o.a.Fragment,null,d&&o.a.createElement(F,{message:d}),o.a.createElement("h5",null,"Fields definition"),o.a.createElement(L,{content:n,onChange:function(e){c(e),p(e)?y(null):y("no json")}}),o.a.createElement("input",{type:"number",value:g,onChange:function(e){var t=e.target.value;console.log(t);var n=Number(t);n>0&&E(n)}}),o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){try{var e=new Array(g).fill(null).map((function(e){return ce(n)}));m(JSON.stringify(e,null,2))}catch(t){console.log(t),y("can't convert")}}},"Generate!"),"\xa0",o.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){c("[]")}},"Reset")),O=u&&o.a.createElement(o.a.Fragment,null,o.a.createElement(I,{value:u}),o.a.createElement("button",{className:"btn btn-secondary",type:"button"},"Copy"));return o.a.createElement(a.LeftRight,{title:"Create Mock Data",left:v,right:O})},ue=function(){return o.a.createElement("p",null,"Page Not Found")};var me=Object(u.f)((function(){return o.a.createElement(h,null,o.a.createElement(u.c,null,o.a.createElement(u.a,{exact:!0,path:"/",component:g}),o.a.createElement(u.a,{exact:!0,path:"/validate/schema",component:C}),o.a.createElement(u.a,{exact:!0,path:"/openApi",component:T}),o.a.createElement(u.a,{exact:!0,path:"/toTS",component:U}),o.a.createElement(u.a,{exact:!0,path:"/queryToTs",component:Y}),o.a.createElement(u.a,{exact:!0,path:"/toJoi",component:Z}),o.a.createElement(u.a,{exact:!0,path:"/fake-data",component:ie}),o.a.createElement(u.a,{path:"/",component:ue})))})),se=m.a({basename:"/ddl"});l.a.render(o.a.createElement(u.b,{history:se},o.a.createElement(me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.fccec5fa.chunk.js.map