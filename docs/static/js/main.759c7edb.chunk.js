(this["webpackJsonp@nexys/ddl"]=this["webpackJsonp@nexys/ddl"]||[]).push([[0],{27:function(e,t,a){e.exports=a(59)},32:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"LeftRight",(function(){return _}));var r=a(0),o=a.n(r),l=a(20),c=a.n(l);a(32),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i,s=a(4),u=a(2),m=a(6),p={borderTop:"1px solid #e5e5e5",borderBottom:"1px solid #e5e5e5",boxShadow:"0 .25rem .75rem rgba(0, 0, 0, .05)"},d=[{link:"/validate/schema",name:"Validate Schema"},{link:"/openApi",name:"Open Api Conversion"}],f=function(e){var t=o.a.createElement("header",null,o.a.createElement("div",{style:p,className:"d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white"},o.a.createElement("h5",{className:"my-0 mr-md-auto font-weight-normal"},o.a.createElement(m.a,{to:"/"},"Digis DDL")),o.a.createElement("nav",{className:"my-2 my-md-0 mr-md-3"},d.map((function(e,t){return o.a.createElement(m.a,{className:"p-2 text-dark",key:t,to:e.link},e.name)})))));return o.a.createElement(o.a.Fragment,null,t,o.a.createElement("div",{className:"container"},e.children))},h=function(e){var t="fa fa-"+e.name;return o.a.createElement("i",{className:t})},g=function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h1",null,"DDL Checker"),o.a.createElement("p",null,"Use the menu to explore the different functionalities of the package"),o.a.createElement("p",null,o.a.createElement("a",{href:"https://github.com/Nexysweb/ddl"},o.a.createElement(h,{name:"code"})," Source")," under MIT license"))},y=a(1),v=a.n(y),E=["Int","Long","Double","LocalDateTime","LocalDate","Boolean","BigDecimal","String"],b=v.a.object().keys({name:v.a.string().alphanum().required(),column:v.a.string().optional(),type:v.a.string().alphanum().required(),optional:v.a.boolean(),permissions:v.a.array().optional(),description:v.a.string().optional()}),N=v.a.object().keys({name:v.a.string().alphanum().required(),uuid:v.a.boolean().optional(),table:v.a.string().optional(),description:v.a.string().optional(),fields:v.a.array().items(b).unique((function(e,t){return e.name===t.name})).required(),permissions:v.a.array().optional(),constraints:v.a.array()}),S=v.a.array().items(N).required(),O=function(e){var t=S.validate(e,{abortEarly:!1});if(void 0===t.error||null===t.error){var a=function(e){var t=[],a=e.map((function(e){var a=e.fields.map((function(e){return e.type})).filter((function(e){return E.indexOf(e)<0}));return t=t.concat(a),e.name})),n=[];return t.map((function(e){return a.indexOf(e)<0&&n.push('"'.concat(e,'" is referenced as a type in params but was never defined')),!0})),n}(JSON.parse(e));return a.length>0?{status:!1,errors:a}:{status:!0,errors:null}}return{status:!1,errors:t.error.details.map((function(e){return e.message+" "+JSON.stringify(e.path)}))}},x=a(23),D=a(24),w=a(25),k=a(26),j=function(e){try{return JSON.parse(e),!0}catch(t){return!1}},C=(i=function(e){var t=O(e);return t&&!t.status&&t.errors?{errors:["the string you entered is not a properly formatted DDL file, try again"].concat(t.errors.map((function(e){return e})))}:t},function(e){return function(e){Object(k.a)(a,e);var t=Object(w.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).state=void 0,n.handleSubmit=function(){var e=n.state.content;if(j(e)){var t=i(e);console.log(t),t.errors?n.setState({errors:t.errors,message:null}):n.setState({errors:null,message:"Congratulations, this is a valid file"})}else n.setState({errors:["the string you entered is not a JSON string, try again"],message:null})},n.handleChange=function(e){var t=e.target.value;n.setState({content:t})},n.state={content:"",errors:null},n}return Object(D.a)(a,[{key:"renderError",value:function(){var e=this.state.errors;return e?o.a.createElement("ul",{className:"list-group"},e.map((function(e,t){return o.a.createElement("li",{className:"list-group-item list-group-item-danger",key:t},e)}))):null}},{key:"renderSuccess",value:function(){var e=this.state.message;return e?o.a.createElement("p",{className:"alert alert-success"},e):null}},{key:"render",value:function(){var e=this.state.content;return o.a.createElement(o.a.Fragment,null,this.renderError(),this.renderSuccess(),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("textarea",{className:"form-control",style:{minWidth:"100%",height:"400px"},placeholder:"insert your json here",value:e,onChange:this.handleChange}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col"},o.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:this.handleSubmit},"Validate"))))}}]),a}(o.a.Component)})((function(){})),L=function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"Schema Validation"),o.a.createElement(C,null))},I=function(){return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"Open Api V3"),o.a.createElement("p",null,"Based on ",o.a.createElement("a",{href:"https://github.com/OAI/OpenAPI-Specification/blob/master/versions/3.0.0.md"},"OpenAPI Specification")),o.a.createElement("p",null,o.a.createElement("b",null,"TODO")))},A=a(7),B=function(e){return o.a.createElement("textarea",{className:"form-control",style:{minWidth:"100%",height:"400px"},placeholder:"insert your json here",value:e.content,onChange:function(t){var a=t.target.value;e.onChange(a)}})},T={display:"block",whiteSpace:"pre-wrap"},J=function(e){return o.a.createElement("code",{style:T},e.value)},q=function(e){return o.a.createElement("p",{className:"alert alert-danger"},e.message)},_=function(e){return o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,"Schema to Typescript"),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6"},e.left),o.a.createElement("div",{className:"col-md-6"},e.right)))},F={name:"Company",uuid:!1,fields:[{type:"LocalDateTime",name:"logDateAdded",optional:!1},{type:"Country",name:"country",column:"country_id",optional:!0},{type:"String",name:"wwId",optional:!0},{type:"String",name:"name",optional:!1},{type:"CompanyStatus",name:"status",column:"status_id",optional:!1},{type:"Int",name:"type",column:"type_id",optional:!1},{type:"User",name:"logUser",column:"log_user_id",optional:!0},{type:"String",name:"ceId",optional:!1}]},V=["LocalDateTime","LocalDate","String","Int","BigDecimal","Double","Boolean"],W=function(e){var t=e.name,a=e.uuid?"uuid: string":"id: number",n=e.fields.map((function(e){var t=e.name,a=e.optional?"?":"",n=function(e){if(V.includes(e))switch(e){case"LocalDateTime":case"LocalDate":return"Date";case"Int":case"BigDecimal":case"Double":return"number";case"Boolean":return"boolean";default:return"string"}return"{id: number} | ".concat(e)}(e.type);return"".concat(t).concat(a,": ").concat(n)})),r=[a].concat(n).join(",\n  ");return"export interface ".concat(t," {\n  ").concat(r,"\n}")},P=function(e){return e.map((function(e){return W(e)})).join("\n\n")},R=function(){var e=Object(r.useState)(JSON.stringify(F,null,2)),t=Object(A.a)(e,2),a=t[0],l=t[1],c=Object(r.useState)(null),i=Object(A.a)(c,2),s=i[0],u=i[1],m=Object(r.useState)(null),p=Object(A.a)(m,2),d=p[0],f=p[1],h=o.a.createElement(o.a.Fragment,null,d&&o.a.createElement(q,{message:d}),o.a.createElement(B,{content:a,onChange:function(e){l(e),j(e)?f(null):f("no json")}}),o.a.createElement("button",{className:"btn btn-primary",type:"button",onClick:function(){try{var e=function(e){var t=JSON.parse(e);return Array.isArray(t)?P(t):t.entities?P(t.entities):W(t)}(a);u(e)}catch(t){f("can't convert")}}},"Convert!"),"\xa0",o.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return l("[]")}},"Reset")),g=s&&o.a.createElement(J,{value:s});return o.a.createElement(n.LeftRight,{left:h,right:g})},U=function(){return o.a.createElement("p",null,"Page Not Found")};var M=Object(s.f)((function(){return o.a.createElement(f,null,o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:"/",component:g}),o.a.createElement(s.a,{exact:!0,path:"/validate/schema",component:L}),o.a.createElement(s.a,{exact:!0,path:"/openApi",component:I}),o.a.createElement(s.a,{exact:!0,path:"/toTS",component:R}),o.a.createElement(s.a,{path:"/",component:U})))})),$=u.a({basename:"/ddl"});c.a.render(o.a.createElement(s.b,{history:$},o.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[27,1,2]]]);
//# sourceMappingURL=main.759c7edb.chunk.js.map